<!DOCTYPE html>
<html>
<head>
    <title>Interactive Bot</title>
</head>
<body>
    <h1>Welcome to the Bot Application</h1>
    <form id="bot-form">
        <label for="agent-type">Choose Bot Type:</label>
        <select id="agent-type" name="agent_type">
            <option value="professional">Professional</option>
            <option value="moderate">Moderate</option>
            <option value="friendly">Friendly</option>
        </select>
        <br><br>
        <button type="submit">Start Interaction</button>
    </form>
    <div id="response">
        <h2>Conversation:</h2>
        <ul id="conversation-list"></ul>
    </div>

    <script>
        const form = document.getElementById('bot-form');
        form.onsubmit = async (e) => {
            e.preventDefault();
            const agentType = document.getElementById('agent-type').value;

            const response = await fetch('/bot', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ agent_type: agentType })
            });
            const result = await response.json();

            const conversationList = document.getElementById('conversation-list');
            conversationList.innerHTML = ""; // Clear previous conversations

            if (result.questions_and_responses) {
                result.questions_and_responses.forEach((entry) => {
                    const listItem = document.createElement('li');
                    listItem.textContent = `Q: ${entry.question} - A: ${entry.response}`;
                    conversationList.appendChild(listItem);
                });
            } else {
                conversationList.innerHTML = `<li>${result.error || "Error occurred"}</li>`;
            }
        };
    </script>
</body>
</html>
